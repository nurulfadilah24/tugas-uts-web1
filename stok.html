<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Stok Buku</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-success">
    <div class="container">
      <a class="navbar-brand" href="index.html">ðŸ“˜ Dashboard Buku</a>
      <div class="ms-auto text-white" id="userInfo"></div>
    </div>
  </nav>

  <!-- Tabel Stok Buku -->
  <div class="container mt-4">
    <h3 class="mb-3">ðŸ“¦ Data Stok Buku</h3>
    <table class="table table-bordered table-striped">
      <thead class="table-success">
        <tr class="text-center">
          <th>No</th>
          <th>Kode Barang</th>
          <th>Nama Buku</th>
          <th>Jenis</th>
          <th>Edisi</th>
          <th>Harga</th>
          <th>Stok</th>
        </tr>
      </thead>
      <tbody id="tabelStok"></tbody>
    </table>

    <button class="btn btn-secondary" onclick="logout()">Logout</button>
  </div>

  <script>
    // Ambil data dari localStorage
    var penggunaAktif = JSON.parse(localStorage.getItem("penggunaAktif"));
    var dataKatalogBuku = JSON.parse(localStorage.getItem("dataKatalogBuku"));

    // Cek login
    if (!penggunaAktif) {
      alert("Silakan login terlebih dahulu!");
      window.location.href = "login.html";
    }

    // Tampilkan info user di navbar
    document.getElementById("userInfo").innerHTML =
      `<b>${penggunaAktif.nama}</b> (${penggunaAktif.role})`;

    // Tampilkan data stok buku ke tabel
    var tbody = document.getElementById("tabelStok");
    dataKatalogBuku.forEach(function(buku, index) {
      var row = `
        <tr>
          <td class="text-center">${index + 1}</td>
          <td>${buku.kodeBarang}</td>
          <td>${buku.namaBarang}</td>
          <td>${buku.jenisBarang}</td>
          <td class="text-center">${buku.edisi}</td>
          <td>${buku.harga}</td>
          <td class="text-center">${buku.stok}</td>
        </tr>
      `;
      tbody.innerHTML += row;
    });

    // Logout function
    function logout() {
      localStorage.removeItem("penggunaAktif");
      window.location.href = "login.html";
    }
  </script>

</body>
</html>
<link rel="stylesheet" href="css/style.css">
